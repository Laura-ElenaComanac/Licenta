import 'package:flutter/material.dart';
import 'package:logger/logger.dart';
import 'package:projyproject/repository/database.dart';
import 'package:projyproject/view_model/bloc.dart';
import 'package:provider/provider.dart';

/* Text Username
    Autogenerated by FlutLab FTF Generator
  */
class GeneratedUsernameWidget extends StatefulWidget {
  // final List<LoggedUserEntry> loggedUsers;
  // const GeneratedUsernameWidget(this.loggedUsers, {Key? key}) : super(key: key);

  @override
  State<GeneratedUsernameWidget> createState() =>
      _GeneratedUsernameWidgetState();
}

class _GeneratedUsernameWidgetState extends State<GeneratedUsernameWidget> {
  Bloc get bloc => Provider.of<Bloc>(context, listen: false);

  @override
  Widget build(BuildContext context) {
    return FittedBox(
        fit: BoxFit.fitHeight,
        child: StreamBuilder<List<LoggedUserEntry>>(
            stream: bloc.loggedUserEntry,
            builder: (context, snapshot) {
              if (!snapshot.hasData) {
                return const Align(
                  alignment: Alignment.center,
                  child: CircularProgressIndicator(),
                );
              }

              final users = snapshot.data!;
              var struser = users.first.username;

              return Text(
                '$struser',
                overflow: TextOverflow.visible,
                textAlign: TextAlign.left,
                style: TextStyle(
                  height: 1.1718750109327738,
                  fontSize: 21.807693481445312,
                  fontFamily: 'Inter',
                  fontWeight: FontWeight.w400,
                  color: Color.fromARGB(255, 255, 255, 255),

                  /* letterSpacing: 0.0, */
                ),
              );
            }));
  }
}
